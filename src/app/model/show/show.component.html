<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item active">
            <a routerLink="/">{{"Home" | translate:locale.language}}</a>
        </li>
        <li class="breadcrumb-item">
            <a routerLink="/model">{{"Models" | translate:locale.language}}</a>
        </li>
        <li class="breadcrumb-item active" *ngIf="model">
            {{"Model" | translate:locale.language}}: {{model.name}}
        </li>
    </ol>
</nav>

<div class="container-fluid">
    <div class="row">
        <div class="col">
            <form class="form-inline">
                <div class="mx-1">
                    <h2>
                        <span class="fas fa-cube mx-1"></span>
                        <!--<span class="mx-1">{{"Model" | translate:locale.language}}: </span>-->
                        <span class="mx-1" *ngIf="!editName && model">{{model.name}}</span>
                    </h2>
                </div>
                <div class="form-group mx-1" *ngIf="editName && model">
                    <label for="modelName" class="sr-only">{{"ModelName" | translate:locale.language}}</label>
                    <input class="form-control" type="text" id="modelName"
                           #inputName [value]="model.name"
                           (change)="updateField(inputName, 'name')"/>
                </div>
                <div class="mx-1">
                    <small class="text-muted mx-1" *ngIf="model && model.imported_name">{{model.imported_name}}</small>
                </div>
                <div class="ml-1">
                    <button class="btn btn-sm text-secondary"
                            (click)="toggleField('name')">
                        <span class="fas fa-pencil-alt"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <form class="form-inline">
                <div class="mx-1">
                    <span class="fas fa-user mr-1 ml-4 text-secondary"></span>
                    <!--<span class="mx-1 text-secondary">{{"Author" | translate:locale.language}}: </span>-->
                    <span class="mx-1 text-secondary" *ngIf="!editAuthor && model">{{model.author}}</span>
                </div>
                <div class="form-group mx-1" *ngIf="editAuthor && model">
                    <label for="modelAuthor" class="sr-only">{{"ModelAuthor" | translate:locale.language}}</label>
                    <input class="form-control form-control-sm" type="text" id="modelAuthor"
                           #inputAuthor [value]="model.author"
                           (change)="updateField(inputAuthor, 'author')"/>
                </div>
                <div class="mx-1">
                    <small class="text-muted mx-1"
                           *ngIf="model && model.imported_author">{{model.imported_author}}</small>
                </div>
                <div class="ml-1">
                    <button class="btn btn-xs text-secondary"
                            (click)="toggleField('author')">
                        <span class="fas fa-pencil-alt"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>
    <div class="row my-3" *ngIf="model">
        <div class="col-9">
            Renderings, Images, Diagrams, ...
        </div>
        <div class="col-3">
            <div class="list-group">
                <button class="list-group-item list-group-item-action">
                    <span class="fas fa-upload text-primary mr-2"></span>
                    {{"Upload" | translate:locale.language}}
                </button>
                <button class="list-group-item list-group-item-action"
                        [class.bg-primary]="model.favorite"
                        [class.text-white]="model.favorite"
                        (click)="changeFavorite()">
                    <span class="fa-heart mr-2"
                          [class.far]="!model.favorite" [class.text-primary]="!model.favorite"
                          [class.text-white]="model.favorite" [class.bg-primary]="model.favorite"
                          [class.fas]="model.favorite"></span>
                    {{"Favorite" | translate:locale.language}}
                </button>
                <div class="list-group-item list-group-item-action">
                    <app-tags-element [modelId]="modelId"></app-tags-element>
                </div>
            </div>
        </div>
    </div>
    <div class="row my-3">
        <div class="col-3">
            <div class="list-group">
                <button class="list-group-item list-group-item-action"
                        [class.active]="navigation === 'description'"
                        (click)="navigation = 'description'">
                    <span class="fas fa-edit text-primary mr-2"
                          [class.text-primary]="navigation !== 'description'"
                          [class.text-white]="navigation === 'description'"></span>
                    {{"Description" | translate:locale.language}}
                </button>
                <button class="list-group-item list-group-item-action"
                        [class.active]="navigation === 'import_description'"
                        (click)="navigation = 'import_description'"
                        *ngIf="model && model.imported_description">
                    <span class="far fa-edit text-primary mr-2"
                          [class.text-primary]="navigation !== 'import_description'"
                          [class.text-white]="navigation === 'import_description'"></span>
                    {{"ImportedDescription" | translate:locale.language}}
                </button>
                <button class="list-group-item list-group-item-action"
                        [class.active]="navigation === 'notes'"
                        (click)="navigation = 'notes'">
                    <span class="fas fa-sticky-note text-primary mr-2"
                          [class.text-primary]="navigation !== 'notes'"
                          [class.text-white]="navigation === 'notes'"></span>
                    {{"Notes" | translate:locale.language}}
                </button>
                <button class="list-group-item list-group-item-action"
                        [class.active]="navigation === 'links'"
                        (click)="navigation = 'links'">
                    <span class="fas fa-link text-primary mr-2"
                          [class.text-primary]="navigation !== 'links'"
                          [class.text-white]="navigation === 'links'"></span>
                    {{"Links" | translate:locale.language}}
                </button>
            </div>
        </div>
        <div class="col-9" *ngIf="model">
            <ng-container [ngSwitch]="navigation">
                <div class="border border-secondary rounded p-3">
                    <div *ngSwitchDefault [innerHTML]="model.description"></div>
                    <div *ngSwitchCase="'import_description'" [innerHTML]="model.imported_description"></div>
                    <div *ngSwitchCase="'notes'" [innerHTML]="model.notes"></div>
                    <div *ngSwitchCase="'links'">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th class="col-3">{{"Link" | translate:locale.language}}</th>
                                <th class="col-7">{{"Description" | translate:locale.language}}</th>
                                <th class="col-2">{{"Actions" | translate:locale.language}}</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr *ngFor="let link of model.links">
                                <td class="align-middle">
                                    <a href="{{link.link}}" target="_blank">{{link.title}}</a>
                                </td>
                                <td class="align-middle"
                                    [innerHTML]="link.description.breakToBr()"></td>
                                <td class="align-middle">
                                    <div class="btn-group btn-group-sm">
                                        <a href="{{link.link}}" target="_blank" class="btn btn-primary">
                                            <span class="fas fa-external-link-alt"></span>
                                        </a>
                                        <button type="button" class="btn btn-secondary"
                                                (click)="preFillEditLinkForm(link)">
                                            <span class="fas fa-pencil-alt"></span>
                                        </button>
                                        <button type="button" class="btn btn-danger"
                                                (click)="deleteLink(link)">
                                            <span class="fas fa-trash-alt"></span>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                        <hr class="my-3">
                        <div class="my-3">
                            <button class="btn btn-block btn-primary"
                                    (click)="openLinkForm = !openLinkForm">
                                {{"ShowAddEditLinkForm" | translate:locale.language}}
                                <span class="fas fa-chevron-down ml-2" *ngIf="!openLinkForm"></span>
                                <span class="fas fa-chevron-up ml-2" *ngIf="openLinkForm"></span>
                            </button>
                        </div>
                        <div class="mt-3" *ngIf="openLinkForm">
                            <form>
                                <div class="form-row">
                                    <div class="form-group col-md-5">
                                        <label for="linkLink">
                                            {{"Link" | translate:locale.language}}
                                        </label>
                                        <input type="url" id="linkLink" #inputLinkLink class="form-control">
                                    </div>
                                    <div class="form-group col-md-5">
                                        <label for="linkTitle">
                                            {{"Title" | translate:locale.language}}
                                        </label>
                                        <input type="text" id="linkTitle" #inputLinkTitle class="form-control">
                                    </div>
                                    <div class="form-group col-md-2">
                                        <button type="submit" class="btn btn-success w-100"
                                                (click)="saveLink()">
                                            {{"Save" | translate:locale.language}}
                                        </button>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="linkDescription">
                                        {{"Description" | translate:locale.language}}
                                    </label>
                                    <textarea id="linkDescription" #inputLinkDescription
                                              class="form-control"></textarea>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </div>
</div>
